{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\n// @ is an alias to /src\nimport EventCard from '@/components/EventCard.vue';\nimport EventService from '@/services/EventService.js';\nimport { watchEffect } from '@vue/runtime-core';\nexport default {\n  name: 'EventListView',\n  props: {\n    page: {\n      type: Number,\n      required: true\n    },\n    perPage: {\n      type: Number,\n      required: true\n    }\n  },\n  components: {\n    EventCard: EventCard\n  },\n  data: function data() {\n    return {\n      events: null,\n      totalEvents: 0\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    watchEffect(function () {\n      EventService.getEvents(_this.perPage, _this.page).then(function (response) {\n        _this.events = response.data;\n        _this.totalEvents = response.headers['x-total-count']; // <--- Store it\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n    });\n  },\n  computed: {\n    hasNextPage: function hasNextPage() {\n      //First, calculate total pages\n      var totalPages = Math.ceil(this.totalEvents / this.perPage); // 2 is events per pages.\n      //Then check to see if the current page is less than the total pages.\n\n      return this.page < totalPages;\n    }\n  }\n};","map":{"version":3,"mappings":";AA2BA;AACA,OAAOA,SAAP,MAAsB,4BAAtB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,SAASC,WAAT,QAA4B,mBAA5B;AAEA,eAAe;EACbC,IAAI,EAAE,eADO;EAEbC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC,MADF;MAEJC,QAAQ,EAAE;IAFN,CADD;IAKLC,OAAO,EAAE;MACPH,IAAI,EAAEC,MADC;MAEPC,QAAQ,EAAE;IAFH;EALJ,CAFM;EAYbE,UAAU,EAAE;IACVV,SAAQ,EAARA;EADU,CAZC;EAebW,IAfa,kBAeN;IACL,OAAO;MACLC,MAAM,EAAE,IADH;MAELC,WAAW,EAAE;IAFR,CAAP;EAID,CApBY;EAqBbC,OArBa,qBAqBH;IAAA;;IACRZ,WAAW,CAAC,YAAM;MAChBD,YAAY,CAACc,SAAb,CAAuB,KAAI,CAACN,OAA5B,EAAqC,KAAI,CAACJ,IAA1C,EACGW,IADH,CACQ,UAACC,QAAD,EAAc;QAClB,KAAI,CAACL,MAAL,GAAcK,QAAQ,CAACN,IAAvB;QACA,KAAI,CAACE,WAAL,GAAmBI,QAAQ,CAACC,OAAT,CAAiB,eAAjB,CAAnB,CAFkB,CAEmC;MACtD,CAJH,WAKS,UAACC,KAAD,EAAW;QAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACD,CAPH;IAQD,CATU,CAAX;EAUD,CAhCY;EAiCbG,QAAQ,EAAE;IACRC,WADQ,yBACM;MACZ;MACA,IAAIC,UAAS,GAAIC,IAAI,CAACC,IAAL,CAAU,KAAKb,WAAL,GAAmB,KAAKJ,OAAlC,CAAjB,CAFY,CAEgD;MAC5D;;MACA,OAAO,KAAKJ,IAAL,GAAYmB,UAAnB;IACF;EANQ;AAjCG,CAAf","names":["EventCard","EventService","watchEffect","name","props","page","type","Number","required","perPage","components","data","events","totalEvents","created","getEvents","then","response","headers","error","console","log","computed","hasNextPage","totalPages","Math","ceil"],"sourceRoot":"","sources":["/Users/tanachok/Desktop/conBo/lab4-5/lab04q5/src/views/EventListView.vue"],"sourcesContent":["<template>\n  <h1>Events For Good</h1>\n  <div class=\"events\">\n    <EventCard v-for=\"event in events\" :key=\"event.id\" :event=\"event\" />\n    <div class=\"pagination\">\n      <router-link\n        id=\"page-prev\"\n        :to=\"{ name: 'EventList', query: { page: page - 1 } }\"\n        rel=\"prev\"\n        v-if=\"page != 1\"\n      >\n        Prev Page</router-link\n      >\n\n      <router-link\n        id=\"page-next\"\n        :to=\"{ name: 'EventList', query: { page: page + 1 } }\"\n        rel=\"next\"\n        v-if=\"hasNextPage\"\n      >\n        Next Page</router-link\n      >\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport EventCard from '@/components/EventCard.vue'\nimport EventService from '@/services/EventService.js'\nimport { watchEffect } from '@vue/runtime-core'\n\nexport default {\n  name: 'EventListView',\n  props: {\n    page: {\n      type: Number,\n      required: true\n    },\n    perPage: {\n      type: Number,\n      required: true\n    }\n  },\n  components: {\n    EventCard\n  },\n  data() {\n    return {\n      events: null,\n      totalEvents: 0\n    }\n  },\n  created() {\n    watchEffect(() => {\n      EventService.getEvents(this.perPage, this.page)\n        .then((response) => {\n          this.events = response.data\n          this.totalEvents = response.headers['x-total-count'] // <--- Store it\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    })\n  },\n  computed: {\n    hasNextPage() {\n      //First, calculate total pages\n      let totalPages = Math.ceil(this.totalEvents / this.perPage) // 2 is events per pages.\n      //Then check to see if the current page is less than the total pages.\n      return this.page < totalPages\n    }\n  }\n}\n</script>\n<style scoped>\n.events {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.pagination {\n  display: flex;\n  width: 290px;\n}\n.pagination a {\n  flex: 1;\n  text-decoration: none;\n  color: #2c3e50;\n}\n#page-prev {\n  text-align: left;\n}\n#page-next {\n  text-align: right;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}